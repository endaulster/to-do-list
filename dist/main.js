(()=>{const t=document.querySelector("[data-list]"),e=document.querySelector("[data-new-list-form]"),n=document.querySelector("[data-new-list-input]"),a=document.querySelector("[data-delete-list-button]"),o=document.querySelector("[data-list-display-container]"),i=document.querySelector("[data-list-title]"),r=document.querySelector("[data-tasks]"),l=document.querySelector("[data-list-count]"),s=document.querySelector("#task-template"),d=document.querySelector("[data-new-task-form]"),c=document.querySelector("[data-new-task-input]"),u=document.querySelector("[data-new-task-priority]"),m=document.querySelector("[data-new-task-date]"),f=document.querySelector("[data-clear-complete-task-button]");let g=document.getElementById("modal-selector");const y="task.lists",p="task.selectedListId",k={Low:{background:"#aee1e1",fontColor:"#35495e"},Normal:{background:"#fdc500",fontColor:"#654321"},High:{background:"#dc0000",fontColor:"#f0f0f0"}};let S=JSON.parse(localStorage.getItem(y))||[{id:Date.now().toString()+Math.random(),name:"Coding Goals",tasks:[w("Finish JavaScript tutorial","High","2024-04-01"),w("Complete coding project","Normal","2024-04-03"),w("Practice algorithms","Low","2024-04-05")]},{id:Date.now().toString()+Math.random(),name:"Grocery Shopping",tasks:[w("Buy fruits and vegetables","High","2024-04-01"),w("Purchase milk and eggs","Normal","2024-04-02"),w("Get bread and cereal","Low","2024-04-04"),w("Pick up snacks","Normal","2024-04-06"),w("Buy cleaning supplies","Low","2024-04-08")]},{id:Date.now().toString()+Math.random(),name:"Fitness Plan",tasks:[w("Go for a run","High","2024-04-01"),w("Do strength training","Normal","2024-04-03"),w("Stretch and flexibility exercises","Low","2024-04-05"),w("Attend yoga class","Normal","2024-04-07"),w("Rest and recovery day","Low","2024-04-09"),w("Prepare healthy meals","High","2024-04-02"),w("Track progress and set new goals","Normal","2024-04-04")]}],v=localStorage.getItem(p);function h(){for(var t=document.body.children,e=0;e<t.length;e++)t[e].classList.contains("modify-task-modal")||t[e].classList.toggle("active")}function w(t,e,n){return{id:Date.now().toString(),name:t,complete:!1,priority:e,date:n}}function L(){localStorage.setItem(y,JSON.stringify(S)),localStorage.setItem(p,v)}function q(){L(),b()}function b(){D(t),S.forEach((e=>{const n=document.createElement("li");n.dataset.listId=e.id,n.classList.add("list-name"),n.innerText=e.name,e.id===v&&n.classList.add("active-option"),t.appendChild(n)}));const e=S.find((t=>t.id===v));null==v?(o.style.display="none",i.innerText=""):(o.style.display="",i.innerText=e.name,function(){const t=(new Date).toISOString().split("T")[0];m.value=t}(),C(e),D(r),function(t){t.tasks.forEach((t=>{const e=document.importNode(s.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),e.querySelector(".modify-task-button").id=t.id;const o=e.querySelector(".priority-div"),i=e.querySelector(".date-div");o.textContent=t.priority,i.textContent=function(t){const e=new Date(t+"T00:00:00"),n=6e4*e.getTimezoneOffset(),a=new Date(e.getTime()+n),o=a.getDate(),i=a.getMonth()+1;return`${o<10?"0"+o:o}-${i<10?"0"+i:i}-${a.getFullYear()}`}(t.date),r.appendChild(e);const l=o.textContent,d=k[l];o.style.background=d.background,o.style.color=d.fontColor}))}(e))}function C(t){const e=t.tasks.filter((t=>!t.complete)).length,n=1===e?"task":"tasks";l.innerText=`${e} ${n} remaining`}function D(t){for(;t.firstChild;)t.removeChild(t.firstChild)}t.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(v=t.target.dataset.listId,q())})),r.addEventListener("click",(t=>{if("input"===t.target.tagName.toLowerCase()){const e=S.find((t=>t.id===v));e.tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,L(),C(e)}})),document.addEventListener("click",(t=>{if(t.target.classList.contains("modify-task-button")){let e=t.target.id;modifyForm.setAttribute("data-form-id",e),g.classList.add("visible"),h()}})),modifyForm.addEventListener("submit",(t=>{t.preventDefault(),g.classList.remove("visible"),function(t){let e=document.querySelector("#newTaskInfo").value,n=document.querySelector("#newDateInfo").value;!function(t,e,n,a){const o=S.find((t=>t.id===v)).tasks.find((e=>e.id===t));o.name=e,o.priority=n,o.date=a,q()}(t,e,document.querySelector("#newPriorityInfo").value,n)}(modifyForm.getAttribute("data-form-id")),h(),modifyForm.reset()})),f.addEventListener("click",(t=>{const e=S.find((t=>t.id===v));e.tasks=e.tasks.filter((t=>!t.complete)),q()})),a.addEventListener("click",(t=>{S=S.filter((t=>t.id!==v)),v=null,q()})),e.addEventListener("submit",(t=>{t.preventDefault();const e=n.value;if(null==e||""===e)return;const a=(o=e,{id:Date.now().toString(),name:o,tasks:[]});var o;n.value=null,S.push(a),q()})),d.addEventListener("submit",(t=>{t.preventDefault();const e=c.value,n=u.value,a=m.value;if(null==e||""===e)return;const o=w(e,n,a);c.value=null,S.find((t=>t.id===v)).tasks.push(o),q()})),b()})();